<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Application</title> <!-- Title will be updated by JS -->
    <link rel="stylesheet" href="styles.css">
     <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
     <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <header>
        <h1 id="page-title">Job Application</h1>
    </header>

    <main class="container centered-container">

        <!-- Application Form View -->
        <div id="apply-view" class="view" style="display: none;">
            <h2 id="apply-job-title">Applying for...</h2>
            <form id="application-form">
                <input type="hidden" id="apply-job-id">
                <div class="form-group">
                    <label for="applicant-name">Full Name:</label>
                    <input type="text" id="applicant-name" required>
                </div>
                <div class="form-group">
                    <label for="applicant-email">Email:</label>
                    <input type="email" id="applicant-email" required>
                </div>
                <div class="form-group">
                    <label for="applicant-phone">Phone:</label>
                    <input type="tel" id="applicant-phone" required>
                </div>
                <div class="form-group">
                    <label for="applicant-resume-link">Resume Link (e.g., LinkedIn, Google Drive):</label>
                    <input type="url" id="applicant-resume-link" required placeholder="https://...">
                     <small>Please ensure the link is publicly accessible.</small>
                </div>
                 <div class="form-group">
                    <label for="applicant-cover-letter">Cover Letter (Optional):</label>
                    <textarea id="applicant-cover-letter" rows="5"></textarea>
                </div>
                <button type="submit" class="btn primary-btn">Submit Application</button>
                <p id="apply-message" class="message"></p>
            </form>
        </div>

        <!-- Candidate Portal View -->
         <div id="portal-view" class="view" style="display: none;">
             <h2 id="portal-welcome">Welcome, <span id="portal-applicant-name"></span>!</h2>
             <p>You applied for the position: <strong id="portal-job-title"></strong></p>
             <p>Your current application status: <strong id="portal-current-stage"></strong></p>

             <div class="feedback-section">
                 <h3>Feedback Received:</h3>
                  <div id="portal-feedback-list" class="feedback-list">
                       <p>No feedback shared yet.</p>
                       <!-- Feedback will be loaded here -->
                  </div>
             </div>

             <div class="ai-chat-section">
                 <h3>Chat with Recruitment Assistant</h3>
                 <p>Ask questions about the role or the application process.</p>
                 <div id="candidate-chat-history" class="chat-history">
                     <!-- Candidate chat messages -->
                 </div>
                 <form id="candidate-chat-form">
                     <input type="hidden" id="chat-applicant-id">
                     <input type="text" id="candidate-chat-input" placeholder="Ask a question..." required>
                     <button type="submit" class="btn primary-btn"><span class="material-icons">send</span></button>
                 </form>
                  <p id="chat-message" class="message"></p>
             </div>
         </div>

        <!-- Loading/Error View -->
        <div id="loading-view" class="view active">
            <p>Loading...</p>
        </div>
         <div id="error-view" class="view" style="display: none;">
            <p id="error-message">An error occurred.</p>
        </div>

    </main>

    <script src="candidate-app.js"></script>
</body>
</html>